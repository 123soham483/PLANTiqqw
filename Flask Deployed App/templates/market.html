{% extends 'base.html' %}
{% block head %}
<title>Products · PlantCare AI</title>
<style>
  .hero {background:linear-gradient(180deg,#f0fbf2,#ffffff);border:1px solid #e6efe6;border-radius:14px;padding:22px;margin-bottom:18px}
  .hero h2{margin:0;font-weight:800;color:#0f4d2b}
  .hero p{margin:6px 0 0;color:#5f836b}
  .grid {display:grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap:16px}
  @media (max-width:1300px){ .grid{grid-template-columns:repeat(4,1fr)} }
  @media (max-width:1024px){ .grid{grid-template-columns:repeat(3,1fr)} }
  @media (max-width:780px){ .grid{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:520px){ .grid{grid-template-columns:1fr} }
  .card{position:relative;background:#fff;border:1px solid #e6efe6;border-radius:14px;overflow:hidden;box-shadow:0 8px 28px rgba(2,6,23,0.06);display:flex;flex-direction:column}
  .card img{width:100%;height:185px;object-fit:contain;background:#f7faf7;padding:12px;border-bottom:1px solid #edf3ed}
  .pill{display:inline-block;font-size:11px;padding:4px 10px;border-radius:999px;margin-bottom:8px}
  .pill-healthy{background:#e8f6ec;color:#216c3a}
  .pill-supp{background:#eef1ff;color:#3342a1}
  .name{font-weight:800;margin:4px 0 6px 0; font-size:15px; line-height:1.25; height:40px; overflow:hidden;color:#0f4d2b}
  .rating{display:flex;align-items:center;gap:6px;color:#3b5e47;font-size:12px;margin-bottom:8px}
  .desc{color:#5f836b;font-size:12px;min-height:30px}
  .row{display:flex;align-items:center;justify-content:space-between;margin-top:12px;gap:8px}
  .price{font-weight:800;color:#0f4d2b;font-size:16px}
  .btn{background:#1d6a3f;color:#fff;padding:8px 12px;border-radius:10px;text-decoration:none;font-size:12px;box-shadow:0 8px 18px rgba(29,106,63,0.18)}
  .btn:hover{opacity:.9}
</style>
{% endblock %}

{% block body %}
<main class="container py-3">
  <div class="hero">
    <h2>Plant Care Products</h2>
    <p>Professional-grade fertilizers, supplements, and treatments for optimal plant health.</p>
  </div>

  <div class="grid">
    {% for s in supplements %}
    <div class="card">
      <img src="{{ url_for('image_proxy') }}?u={{ s.image_url | urlencode }}" alt="{{ s.name }}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x260?text=Image+unavailable'">
      <div class="body" style="padding:12px 12px 14px 12px">
        {% set tag = (s.type or 'Supplements') %}
        <span class="pill {{ 'pill-healthy' if tag|lower == 'healthy' else 'pill-supp' }}">{{ tag }}</span>
        <div class="name" title="{{ s.name }}">{{ s.name }}</div>
        <div class="rating">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="#2f8a53" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.192-5.934 5.787 1.402 8.166L12 18.897l-7.336 3.866 1.402-8.166L.132 9.21l8.2-1.192L12 .587z"/></svg>
          <span>{{ s.rating or '4.7' }}</span>
        </div>
        {% if s.disease_description %}
          <div class="desc">{{ s.disease_description }}</div>
        {% endif %}
        <div class="row">
          <div class="price">{{ s.price or 'Check price' }}</div>
          <a class="btn" href="{{ s.buy_link }}" target="_blank" rel="noopener noreferrer">Buy</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div style="margin-top:22px;background:linear-gradient(180deg,#1d6a3f,#2f8a53);border-radius:14px;padding:28px;text-align:center;color:#fff">
    <h3 style="margin:0 0 8px 0;font-weight:800">Need Help Choosing?</h3>
    <p style="opacity:.9;margin:0 0 12px 0">Upload a leaf photo for AI‑powered product recommendations tailored to your plant.</p>
    <a href="{{ url_for('ai_engine_page') }}" class="btn" style="background:#c6e58a;color:#0f4d2b">Get Personalized Recommendations</a>
  </div>
</main>
{% endblock %}